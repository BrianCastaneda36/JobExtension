  document.getElementById('saveBtn').addEventListener('click', handleSaveProfile);
  document.getElementById('importGrokKeyBtn').addEventListener('click', () => document.getElementById('grokKeyFile').click());
  document.getElementById('grokKeyFile').addEventListener('change', handleImportKeyFile);
  document.getElementById('clearGrokKeyBtn').addEventListener('click', () => {
    document.getElementById('grokApiKey').value = '';
  document.getElementById('generateGrokBtn').addEventListener('click', handleGenerateGrok);
  document.getElementById('extractResumeBtn').addEventListener('click', handleExtractResume);
  document.getElementById('deleteExtractedBtn').addEventListener('click', handleDeleteExtracted);
  document.getElementById('retryGrokBtn').addEventListener('click', handleRetryGrok);
  const jobSetupBtn = document.getElementById('jobSetupBtn');
  const resumeFileInput = document.getElementById('resumeFile');
  document.getElementById('digestJDBtn').addEventListener('click', handleDigestJD);
  document.getElementById('interviewPrepBtn').addEventListener('click', handleInterviewPrep);
  document.getElementById('printPrepBtn').addEventListener('click', () => window.print());
      const value = document.getElementById(src)?.value || '';
  document.getElementById('matchPortfolioBtn').addEventListener('click', handleMatchPortfolio);
  document.getElementById('saveProjectBtn').addEventListener('click', handleSaveProject);
  document.getElementById('deleteProjectBtn').addEventListener('click', handleDeleteProject);
  document.getElementById('salaryResearchBtn').addEventListener('click', handleSalaryResearch);
  document.getElementById('exportCsvBtn').addEventListener('click', handleExportCsv);
  document.getElementById('backupSettingsBtn').addEventListener('click', handleBackupSettings);
  document.getElementById('restoreSettingsBtn').addEventListener('click', () => document.getElementById('settingsFileInput').click());
  document.getElementById('settingsFileInput').addEventListener('change', handleRestoreSettings);
  document.getElementById('addResumeVariantBtn').addEventListener('click', handleSaveResumeVariant);
  document.getElementById('applyResumeVariantBtn').addEventListener('click', handleApplyResumeVariant);
  document.getElementById('deleteResumeVariantBtn').addEventListener('click', handleDeleteResumeVariant);
  const exportResumeBtn = document.getElementById('exportTargetedResumeBtn');
  document.getElementById('addQueueBtn').addEventListener('click', handleSaveQueueItem);
  document.getElementById('deleteQueueBtn').addEventListener('click', handleDeleteQueueItem);
  document.getElementById('clearJobQueueBtn').addEventListener('click', handleClearQueue);
  const fetchSuggestionsBtn = document.getElementById('fetchSuggestionsBtn');
  const queueSuggestionsBtn = document.getElementById('queueSuggestionsBtn');
  const askBtn = document.getElementById('assistantAskBtn');
  const clearChatBtn = document.getElementById('assistantClearBtn');
    const log = document.getElementById('assistantChatLog');
  document.getElementById('applyProfileBtn').addEventListener('click', handleApplyPreset);
  document.getElementById('saveProfileBtn').addEventListener('click', handleSavePreset);
  document.getElementById('deleteProfileBtn').addEventListener('click', handleDeletePreset);
  document.getElementById('openTrackerBtn').addEventListener('click', () => {
  document.getElementById('trackerSearch').addEventListener('input', filterTracker);
  document.getElementById('emphasizeKeywords').checked = Boolean(profile.emphasizeKeywords);
  document.getElementById('mockMode').checked = Boolean(profile.mockMode);
  const autoSubmitToggle = document.getElementById('autoSubmitEnabled');
  const autoSubmitDelay = document.getElementById('autoSubmitDelay');
  const useLiveSuggestions = document.getElementById('useLiveSuggestions');
  document.getElementById('disabilityStatus').value = profile.disabilityStatus || '';
  document.getElementById('veteranStatus').value = profile.veteranStatus || '';
  const el = document.getElementById(id);
    const el = document.getElementById(id);
  profile.emphasizeKeywords = document.getElementById('emphasizeKeywords').checked;
  profile.mockMode = document.getElementById('mockMode').checked;
  profile.autoSubmitEnabled = document.getElementById('autoSubmitEnabled')?.checked || false;
  profile.autoSubmitDelay = parseInt(document.getElementById('autoSubmitDelay')?.value || '1200', 10);
  profile.useLiveSuggestions = document.getElementById('useLiveSuggestions')?.checked || false;
  profile.disabilityStatus = document.getElementById('disabilityStatus').value;
  profile.veteranStatus = document.getElementById('veteranStatus').value;
  profile.matchedProjects = document.getElementById('matchedProjects')?.value || '';
  const company = (document.getElementById('queueCompany').value || '').trim();
  const title = (document.getElementById('queueTitle').value || '').trim();
  const url = (document.getElementById('queueUrl').value || '').trim();
  const select = document.getElementById('queueSelect');
  const input = document.getElementById('jobSetupInput')?.value || '';
  const outputEl = document.getElementById('jobSetupOutput');
      document.getElementById('targetRole').value = suggestion.targetRole;
      document.getElementById('desiredTitle').value = suggestion.targetRole;
      document.getElementById('targetCompany').value = suggestion.targetCompany;
      document.getElementById('location').value = suggestion.location;
      document.getElementById('expectedSalaryYearly').value = suggestion.salary;
      document.getElementById('remotePreference').value = suggestion.remotePreference;
  const question = document.getElementById('assistantChatInput')?.value || '';
  const log = document.getElementById('assistantChatLog');
  const outputEl = document.getElementById('jobSuggestions');
  const text = document.getElementById('jobSuggestions')?.value || '';
  const select = document.getElementById('projectSelect');
  const select = document.getElementById('resumeVariantSelect');
  const select = document.getElementById('profileSelect');
  const select = document.getElementById('queueSelect');
  const badge = document.getElementById('activeResumeBadge');
  const badge = document.getElementById('resumeStatus');
  const extractBtn = document.getElementById('extractResumeBtn');
  const hasFileInput = document.getElementById('resumeFile');
  const lastExt = document.getElementById('lastExtractedAt');
  const lastGen = document.getElementById('lastGeneratedAt');
  const el = document.getElementById('saveStatus');
  const el = document.getElementById('grokStatus');
  const el = document.getElementById('grokErrorLog');
  document.getElementById('grokApiKey').value = text.trim();
    if (answers.aboutYou) document.getElementById('aboutYou').value = answers.aboutYou;
    if (answers.whyThisRole) document.getElementById('whyThisRoleTemplate').value = answers.whyThisRole;
    if (answers.strengths) document.getElementById('strengths').value = answers.strengths;
    if (answers.remotePreference) document.getElementById('remotePreference').value = answers.remotePreference;
    if (answers.roleBullets) document.getElementById('roleBullets').value = answers.roleBullets;
    profile.aboutYou = document.getElementById('aboutYou').value;
    profile.whyThisRoleTemplate = document.getElementById('whyThisRoleTemplate').value;
    profile.strengths = document.getElementById('strengths').value;
    profile.remotePreference = document.getElementById('remotePreference').value;
    profile.roleBullets = document.getElementById('roleBullets').value || profile.roleBullets;
  const fileInput = document.getElementById('resumeFile');
    if (extraction.resumeSummary) document.getElementById('resumeSummary').value = extraction.resumeSummary;
    if (extraction.aboutYou) document.getElementById('aboutYou').value = extraction.aboutYou;
    if (extraction.strengths) document.getElementById('strengths').value = extraction.strengths;
    if (extraction.remotePreference) document.getElementById('remotePreference').value = extraction.remotePreference;
    profile.resumeSummary = document.getElementById('resumeSummary').value;
    profile.aboutYou = document.getElementById('aboutYou').value;
    profile.strengths = document.getElementById('strengths').value;
    profile.remotePreference = document.getElementById('remotePreference').value;
  document.getElementById('resumeSummary').value = '';
      if (extraction.resumeSummary) document.getElementById('resumeSummary').value = extraction.resumeSummary;
      profile.resumeSummary = document.getElementById('resumeSummary').value;
    profile.jdSummary = document.getElementById('jdSummary').value;
    profile.jdKeywords = document.getElementById('jdKeywords').value;
    profile.missingKeywords = document.getElementById('missingKeywords').value;
    profile.roleBullets = document.getElementById('roleBullets').value;
    profile.recruiterNote = document.getElementById('recruiterNote').value;
    profile.followupNote = document.getElementById('followupNote').value;
    profile.companySnapshot = document.getElementById('companySnapshot').value;
    profile.whyUsPoints = document.getElementById('whyUsPoints').value;
    profile.interviewQuestions = document.getElementById('interviewQuestions').value;
    profile.interviewTalkingPoints = document.getElementById('interviewTalkingPoints').value;
    profile.interviewQuestions = document.getElementById('interviewQuestions').value;
    profile.interviewTalkingPoints = document.getElementById('interviewTalkingPoints').value;
  if (digest.summary) document.getElementById('jdSummary').value = digest.summary;
  if (digest.keywords) document.getElementById('jdKeywords').value = digest.keywords.join(', ');
  if (digest.missingKeywords) document.getElementById('missingKeywords').value = digest.missingKeywords.join(', ');
  if (digest.roleBullets) document.getElementById('roleBullets').value = digest.roleBullets.join('\n');
  if (digest.recruiterNote) document.getElementById('recruiterNote').value = digest.recruiterNote;
  if (digest.followupNote) document.getElementById('followupNote').value = digest.followupNote;
  if (digest.companySnapshot) document.getElementById('companySnapshot').value = digest.companySnapshot;
  if (digest.whyUsPoints) document.getElementById('whyUsPoints').value = digest.whyUsPoints.join('\n');
  if (digest.interviewQuestions) document.getElementById('interviewQuestions').value = digest.interviewQuestions.join('\n');
  if (digest.interviewTalkingPoints) document.getElementById('interviewTalkingPoints').value = digest.interviewTalkingPoints.join('\n');
  const name = (document.getElementById('projectName').value || '').trim();
  const url = (document.getElementById('projectUrl').value || '').trim();
  const tags = (document.getElementById('projectTags').value || '').split(',').map(t => t.trim()).filter(Boolean);
  const select = document.getElementById('projectSelect');
  document.getElementById('matchedProjects').value = output;
  const name = (document.getElementById('resumeVariantName').value || '').trim();
  const url = (document.getElementById('resumeVariantUrl').value || '').trim();
  const select = document.getElementById('resumeVariantSelect');
  const select = document.getElementById('resumeVariantSelect');
  const role = (document.getElementById('salaryRole').value || '').trim();
  const location = (document.getElementById('salaryLocation').value || '').trim();
  document.getElementById('salaryEstimate').value = estimate;
  const name = (document.getElementById('profileName').value || '').trim();
  const select = document.getElementById('profileSelect');
  const select = document.getElementById('profileSelect');
  document.getElementById('trackerTotal').textContent = total;
  document.getElementById('trackerLast7').textContent = last7;
  document.getElementById('trackerInterview').textContent = interviewing;
  document.getElementById('trackerOffer').textContent = offers;
  const search = document.getElementById('trackerSearch').value.toLowerCase();
  const container = document.getElementById('trackerList');
